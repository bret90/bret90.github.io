<html>
<head>
 <meta charset="utf-8">
 <title>v2 code test</title>
</head>
<body>

<!-- insert v2 (beta) cut 'n' paste code here -->
<script src="https://www.cognitoforms.com/f/seamless.js" data-key="XTVJjditNE6dZ93y8jvGzQ" data-form="5"></script>


<script>
  // ########## wait until HTML/DOM ready
  document.addEventListener('readystatechange', event => {
  /*
  // When HTML/DOM elements are ready:
  if (event.target.readyState === "interactive") {   //does same as:  ..addEventListener("DOMContentLoaded"..
     console.log("HTML/DOM ready");
  }
  */
  // When window loaded ( external resources are loaded too- `css`,`src`, etc...)
  if(event.target.readyState === "complete") {
    //console.log("webpage loading complete");


    // ########## wait until XHR is complete
    // step 1: hide page
    var el;
    el = document.querySelector('html');
    if (el) { el.style["opacity"] = 0; }

    // step 2: wait until undesired parts get created
    // every N milliseconds check for the parts existence;
    // when they are found to be present
    //   a) hide undesired elements
    //   b) apply any desired form styling
    //   c) un-hide page

    (function() {
      var breakOut = false;
      var c = 0;
      var timeout = setInterval(function() {

        // undesired parts:
        var el1 = document.querySelector('.cog-branding');
        var el2 = document.querySelector('.cog-abuse');
        if(el1 && el2) {
          //console.log("undesired elements found");
          // a) hide undesired elements
          el1.style["display"] = "none";
          el2.style["display"] = "none";


          // b) apply any desired form styling
          el = document.querySelector('.cog-form');
          if (el) el.style["box-shadow"] = "0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)";
          el = document.querySelector('.cog-button');
          if (el) el.style["margin"] = "15px";


          // c) un-hide page
          el = document.querySelector('html');
          if (el) el.style["opacity"] = 1;
          breakOut = true;
        }

        c++;
        //console.log("waiting for XHR to complete:",c);
        if (breakOut) { clearInterval(timeout); }
      }, 200);
    })();
  }
});
</script>

</body>
</html>

